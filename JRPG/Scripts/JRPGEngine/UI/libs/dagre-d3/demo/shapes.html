<!doctype html>

<meta charset="utf-8">
<title>Dagre D3 Demo: Shapes</title>

<link rel="stylesheet" href="demo.css">
<script src="../../d3/d3.v3.min.js" charset="utf-8"></script>
<script src="../build/dist/dagre-d3.js"></script>

<style id="css">
body {
  font: 300 14px 'Helvetica Neue', Helvetica;
}

.node rect,
.node circle,
.node ellipse,
.node polygon {
  stroke: #333;
  fill: #fff;
  stroke-width: 1.5px;
}

.edgePath path {
  stroke: #333;
  fill: #333;
  stroke-width: 1.5px;
}
</style>

<h1>Dagre D3 Demo: Shapes</h1>

<svg width=960 height=600><g/></svg>

<section>
<p>A sample that shows the different node shapes available in dagre-d3.
</section>

<script id="js">
// Create a new directed graph
var g = new dagreD3.graphlib.Graph().setGraph({});

g.setNode("rect", { shape: "rect" });
g.setNode("circle", { shape: "circle" });
g.setNode("ellipse", { shape: "ellipse" });
g.setNode("diamond", { shape: "diamond" });
g.setEdge("diamond", "rect",{});
var svg = d3.select("svg"),
    inner = svg.select("g");

    var positionLabel = svg.append("text")
.attr("x", 10)
.attr("y", 30);
// Set up zoom support
var zoom = d3.behavior.zoom().on("zoom", function() {
      inner.attr("transform", "translate(" + d3.event.translate + ")" +
                                  "scale(" + d3.event.scale + ")");
    });
svg.call(zoom);

svg.on("mousemove", function () { //<-A
printPosition();
});
function printPosition() { //<-B
var position = d3.mouse(svg.node()); //<-C
positionLabel.text(position);
}
    
    svg.on("click", function () { //<-D
for (var i = 1; i < 5; ++i) {
var position = d3.mouse(svg.node());
var circle = svg.append("circle")
.attr("cx", position[0])
.attr("cy", position[1])
.attr("r", 1)
.style("stroke-width", 5 / (i))
.transition()
.delay(Math.pow(i, 2.5) * 50)
.duration(2000)
.ease('quad-in')
//.attr("r", r)
.style("stroke-opacity", 0)
.each("end", function () {
d3.select(this).remove();
});
}
});
// Create the renderer
var render = new dagreD3.render();

// Run the renderer. This is what draws the final graph.
render(inner, g);

// Center the graph
var initialScale = 0.75;
zoom
  .translate([(svg.attr("width") - g.graph().width * initialScale) / 2, 20])
  .scale(initialScale)
  .event(svg);
//svg.attr('height', g.graph().height * initialScale + 40);
</script>

<script src="demo.js"></script>
